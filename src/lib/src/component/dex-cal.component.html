<div class="toggle" (click)="toggleCalendar()">
    <span><b>{{allOptions.label}}:</b> {{selectedRangeText}}</span><span>▾</span>
</div>

<div class="calendar-container" *ngIf="showCalendar">
    <div class="options">
        <h4>Range options</h4>
        <ul>
            <li *ngFor="let range of allOptions.ranges" (click)="setRange(range.daysBackFromToday)" [ngClass]="{'selected-range': (numberOfDaysInRange === range.daysBackFromToday) && areTheSameDate(endDate, today)}"><a>{{range.label}}</a></li>
            <li (click)="setCustomRange()" [ngClass]="{'selected-range': highlightCustom}"><a>Custom</a></li>
        </ul>
    </div>
    <div class="calendar">

        <div class="calendar-controls">
            <div>
                <button class="arrow" (click)="previousMonth()">◀</button> {{months[selectedMonth]}}
                <button class="arrow" (click)="nextMonth()">▶</button>
            </div>
            <div>
                <button class="arrow" (click)="previousYear()">◀</button> {{selectedYear}}
                <button class="arrow" (click)="nextYear()">▶</button>
            </div>
        </div>
        <div class="weeks-container">
            <ul class="weekdays">
                <li>Sun</li>
                <li>Mon</li>
                <li>Tue</li>
                <li>Wed</li>
                <li>Thur</li>
                <li>Fri</li>
                <li>Sat</li>
            </ul>

            <ul class="weeks" *ngFor="let week of weeks">
                <li class="days" *ngFor="let day of week; let i=index" [ngClass]="{'selected-date': day.isSelected, 'date-in-range': day.isInRange}" (click)="selectDate(day)"><a>{{day.date > 0 ? day.date: ''}}</a></li>
            </ul>
        </div>
        <footer>
            <button [disabled]="!isCustomRange" (click)="rangeSelected()">Apply</button>
            <button class="cancel" [disabled]="!isCustomRange" (click)="cancel()">Cancel</button>
        </footer>
    </div>
</div>